<VirtualHost *:80>

  RewriteEngine On
  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

</VirtualHost>


<VirtualHost _default_:443>

  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/owncloud

  <Directory /var/www/owncloud/>
   AllowOverride All
  </Directory>

	# Possible values include: debug, info, notice, warn, error, crit,
	# alert, emerg.
  LogLevel warn
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

	SSLEngine on
	SSLCertificateFile	/etc/ssl/owncloud.crt
	SSLCertificateKeyFile /etc/ssl/owncloud.key

	BrowserMatch "MSIE [2-6]" \
			nokeepalive ssl-unclean-shutdown \
			downgrade-1.0 force-response-1.0
	# MSIE 7 and newer should be able to use keepalive
	BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

</VirtualHost>
